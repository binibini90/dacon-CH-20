<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§ì¶¤í˜• ê´€ê´‘ ì½”ìŠ¤ ì¶”ì²œ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: white;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2em;
            margin-bottom: 5px;
        }

        .faq-btn {
            position: absolute;
            right: 30px;
            top: 50%;
            transform: translateY(-50%);
            background: white;
            color: #667eea;
            border: none;
            padding: 12px 25px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 1em;
        }

        .faq-btn:hover {
            transform: translateY(-50%) scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .input-section {
            display: flex;
            gap: 20px;
            padding: 20px 30px;
            background: #f8f9fa;
            border-bottom: 2px solid #e0e0e0;
            flex-wrap: wrap;
        }

        .input-group {
            flex: 1;
            min-width: 250px;
        }

        .input-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 10px;
            color: #333;
            font-size: 0.95em;
        }

        .input-group input {
            width: 100%;
            padding: 12px;
            margin-bottom: 8px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 0.95em;
            transition: border-color 0.3s;
        }

        .input-group input:focus {
            outline: none;
            border-color: #667eea;
        }

        .calendar-input {
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 0.95em;
            width: 100%;
            cursor: pointer;
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 8px;
            font-size: 1.1em;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.2s;
            margin-top: 20px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
        }

        .main-content {
            display: flex;
            gap: 0;
            flex: 1;
            overflow: hidden;
        }

        .left-panel, .right-panel {
            flex: 1;
            background: #ffffff;
            padding: 25px;
            overflow-y: auto;
            border-right: 1px solid #e0e0e0;
        }

        .right-panel {
            border-right: none;
            border-left: 1px solid #e0e0e0;
            display: flex;
            flex-direction: column;
            padding: 0;
        }

        .map-container {
            flex: 2;
            background: #e8f4f8;
            display: flex;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .map-placeholder {
            text-align: center;
            color: #666;
        }

        .map-placeholder svg {
            width: 150px;
            height: 150px;
            margin-bottom: 20px;
            opacity: 0.5;
        }

        .panel-title {
            font-size: 1.5em;
            font-weight: bold;
            margin-bottom: 20px;
            color: #667eea;
            border-bottom: 3px solid #667eea;
            padding-bottom: 10px;
        }

        .restaurant-item {
            background: #f8f9fa;
            padding: 15px;
            margin-bottom: 15px;
            border-radius: 8px;
            border-left: 4px solid #667eea;
            transition: transform 0.2s;
        }

        .restaurant-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }

        .restaurant-name {
            font-weight: bold;
            font-size: 1.1em;
            margin-bottom: 5px;
            color: #333;
        }

        .restaurant-info {
            color: #666;
            font-size: 0.9em;
            margin-bottom: 5px;
        }

        .rating {
            color: #ffa500;
            font-weight: bold;
        }

        .badge {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 3px 10px;
            border-radius: 12px;
            font-size: 0.8em;
            margin-right: 5px;
        }

        .route-badge {
            background: #28a745;
        }

        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 25px;
            font-weight: bold;
            font-size: 1.2em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 25px;
            background: #f8f9fa;
            max-height: calc(100vh - 300px);
        }

        .message {
            margin-bottom: 20px;
            animation: fadeIn 0.5s ease-in;
            display: flex;
            width: 100%;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.ai {
            display: flex;
            gap: 10px;
            align-items: flex-start;
        }

        .message.user {
            display: flex;
            gap: 10px;
            flex-direction: row-reverse;
            align-items: flex-start;
        }

        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            flex-shrink: 0;
        }

        .avatar.ai {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .avatar.user {
            background: #e0e0e0;
            color: #666;
        }

        .message-content {
            max-width: 75%;
            padding: 15px 18px;
            border-radius: 18px;
            line-height: 1.5;
            word-break: keep-all;
            word-wrap: break-word;
            white-space: normal;
        }

        .message.ai .message-content {
            background: white;
            border: 1px solid #e0e0e0;
            border-top-left-radius: 4px;
            min-width: 100px;
        }

        .message.user .message-content {
            background: #667eea;
            color: white;
            border-top-right-radius: 4px;
            min-width: 100px;
        }

        .message-time {
            font-size: 0.75em;
            color: #999;
            margin-top: 5px;
            padding: 0 10px;
        }

        .course-box {
            background: #f0f4ff;
            border-left: 4px solid #667eea;
            padding: 12px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .course-box strong {
            color: #667eea;
            display: block;
            margin-bottom: 5px;
        }

        .chat-input-container {
            padding: 20px 25px;
            background: white;
            border-top: 1px solid #e0e0e0;
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            padding: 12px 18px;
            border: 2px solid #e0e0e0;
            border-radius: 24px;
            font-size: 0.95em;
            outline: none;
            transition: border-color 0.3s;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        .chat-input:focus {
            border-color: #667eea;
        }

        .chat-input::placeholder {
            color: #999;
        }

        .send-button {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2em;
            transition: transform 0.2s;
            flex-shrink: 0;
        }

        .send-button:hover {
            transform: scale(1.05);
        }

        .send-button:active {
            transform: scale(0.95);
        }

        /* FAQ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
        .faq-page {
            display: none;
            width: 100%;
            height: 100vh;
            flex-direction: column;
        }

        .faq-page.active {
            display: flex;
        }

        .faq-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 30px;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }

        .back-btn {
            background: white;
            color: #667eea;
            border: none;
            padding: 10px 20px;
            border-radius: 20px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }

        .back-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }

        .faq-content {
            display: flex;
            flex: 1;
            overflow: hidden;
        }

        .faq-sidebar {
            width: 300px;
            background: #f8f9fa;
            border-right: 2px solid #e0e0e0;
            overflow-y: auto;
            padding: 20px;
        }

        .faq-category {
            margin-bottom: 15px;
        }

        .category-title {
            font-weight: bold;
            font-size: 1.1em;
            color: #667eea;
            margin-bottom: 10px;
            padding: 10px;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .category-title:hover {
            background: #667eea;
            color: white;
        }

        .faq-questions {
            margin-left: 10px;
        }

        .faq-question-item {
            padding: 8px 12px;
            margin: 5px 0;
            background: white;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.2s;
            border-left: 3px solid transparent;
        }

        .faq-question-item:hover {
            border-left-color: #667eea;
            transform: translateX(5px);
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .faq-main {
            flex: 1;
            display: flex;
            flex-direction: column;
            background: white;
        }

        .faq-chatbot {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .faq-chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 30px;
            background: #f8f9fa;
            max-height: calc(100vh - 300px);
        }

        @media (max-width: 1200px) {
            .main-content, .faq-content {
                flex-direction: column;
            }
            
            .left-panel, .right-panel, .map-container {
                max-height: 400px;
            }

            .faq-sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 2px solid #e0e0e0;
            }
        }
    </style>
</head>
<body>
    <!-- ë©”ì¸ í˜ì´ì§€ -->
    <div class="container" id="mainPage">
        <div class="header">
            <h1>ğŸ—ºï¸ ë§ì¶¤í˜• ê´€ê´‘ ì½”ìŠ¤ ì¶”ì²œ ì‹œìŠ¤í…œ</h1>
            <p>ì›í•˜ëŠ” ëª…ì†Œì™€ ë§›ì§‘ì„ ì…ë ¥í•˜ë©´ AIê°€ ìµœì ì˜ ì—¬í–‰ ì½”ìŠ¤ë¥¼ ì¶”ì²œí•´ë“œë¦½ë‹ˆë‹¤</p>
            <button class="faq-btn" onclick="showFAQ()">â“ FAQ</button>
        </div>

        <div class="input-section">
            <div class="input-group">
                <label>ğŸ›ï¸ ë°©ë¬¸í•˜ê³  ì‹¶ì€ ëª…ì†Œ (3ê³³)</label>
                <input type="text" placeholder="ëª…ì†Œ 1 (ì˜ˆ: ê²½ë³µê¶)">
                <input type="text" placeholder="ëª…ì†Œ 2 (ì˜ˆ: Nì„œìš¸íƒ€ì›Œ)">
                <input type="text" placeholder="ëª…ì†Œ 3 (ì˜ˆ: ëª…ë™ ê±°ë¦¬)">
            </div>

            <div class="input-group">
                <label>ğŸ½ï¸ ê°€ê³  ì‹¶ì€ ìŒì‹ì  (2-3ê³³)</label>
                <input type="text" placeholder="ìŒì‹ì  1 (ì˜ˆ: ê´‘ì¥ì‹œì¥)">
                <input type="text" placeholder="ìŒì‹ì  2 (ì˜ˆ: ëª…ë™êµì)">
                <input type="text" placeholder="ìŒì‹ì  3 (ì„ íƒì‚¬í•­)">
            </div>

            <div class="input-group">
                <label>ğŸ“… ì—¬í–‰ ë‚ ì§œ</label>
                <input type="date" class="calendar-input" value="2025-11-20">
                <input type="date" class="calendar-input" value="2025-11-21" style="margin-top: 8px;">
                <button class="submit-btn">ì½”ìŠ¤ ì¶”ì²œë°›ê¸°</button>
            </div>
        </div>

        <div class="main-content">
            <div class="left-panel">
                <h2 class="panel-title">ğŸ“ ì¶”ì²œ ìŒì‹ì </h2>
                
                <div class="restaurant-item">
                    <div class="restaurant-name">ğŸœ ê´‘ì¥ì‹œì¥ ë³¸ì </div>
                    <div class="restaurant-info">
                        <span class="rating">â­ 4.8</span> Â· ë¦¬ë·° 2,345ê°œ
                    </div>
                    <div class="restaurant-info">ğŸ“ ì„œìš¸ ì¢…ë¡œêµ¬ ì°½ê²½ê¶ë¡œ 88</div>
                    <div class="restaurant-info">ğŸ’° 1ì¸ë‹¹ 10,000ì› Â· í•œì‹, ë¶„ì‹</div>
                    <span class="badge">ê²½ë¡œ ì¤‘ê°„</span>
                </div>

                <div class="restaurant-item">
                    <div class="restaurant-name">ğŸ¥Ÿ ëª…ë™êµì ë³¸ì </div>
                    <div class="restaurant-info">
                        <span class="rating">â­ 4.6</span> Â· ë¦¬ë·° 1,823ê°œ
                    </div>
                    <div class="restaurant-info">ğŸ“ ì„œìš¸ ì¤‘êµ¬ ëª…ë™10ê¸¸ 29</div>
                    <div class="restaurant-info">ğŸ’° 1ì¸ë‹¹ 12,000ì› Â· ì¤‘ì‹, ë§Œë‘</div>
                    <span class="badge">ëª…ì†Œ ê·¼ì²˜</span>
                </div>

                <div class="restaurant-item">
                    <div class="restaurant-name">ğŸ– ì‚¼ì²­ë™ ìˆ˜ì œë¹„</div>
                    <div class="restaurant-info">
                        <span class="rating">â­ 4.7</span> Â· ë¦¬ë·° 1,456ê°œ
                    </div>
                    <div class="restaurant-info">ğŸ“ ì„œìš¸ ì¢…ë¡œêµ¬ ì‚¼ì²­ë¡œ 101-1</div>
                    <div class="restaurant-info">ğŸ’° 1ì¸ë‹¹ 9,000ì› Â· í•œì‹, ìˆ˜ì œë¹„</div>
                    <span class="badge">ê²½ë¡œ ê·¼ì²˜</span>
                </div>

                <div class="restaurant-item">
                    <div class="restaurant-name">ğŸ ì´íƒœì› íŒŒìŠ¤íƒ€</div>
                    <div class="restaurant-info">
                        <span class="rating">â­ 4.5</span> Â· ë¦¬ë·° 987ê°œ
                    </div>
                    <div class="restaurant-info">ğŸ“ ì„œìš¸ ìš©ì‚°êµ¬ ì´íƒœì›ë¡œ 152</div>
                    <div class="restaurant-info">ğŸ’° 1ì¸ë‹¹ 18,000ì› Â· ì–‘ì‹, íŒŒìŠ¤íƒ€</div>
                    <span class="badge">ì„ íƒ ê°€ëŠ¥</span>
                </div>

                <div class="restaurant-item">
                    <div class="restaurant-name">ğŸ› ì¸ì‚¬ë™ ì „í†µì°»ì§‘</div>
                    <div class="restaurant-info">
                        <span class="rating">â­ 4.9</span> Â· ë¦¬ë·° 2,103ê°œ
                    </div>
                    <div class="restaurant-info">ğŸ“ ì„œìš¸ ì¢…ë¡œêµ¬ ì¸ì‚¬ë™ê¸¸ 62</div>
                    <div class="restaurant-info">ğŸ’° 1ì¸ë‹¹ 15,000ì› Â· ì¹´í˜, ì „í†µì°¨</div>
                    <span class="badge route-badge">ì¶”ì²œ</span>
                </div>
            </div>

            <div class="map-container">
                <div class="map-placeholder">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                        <circle cx="12" cy="10" r="3"></circle>
                    </svg>
                    <h3>ì§€ë„ ì˜ì—­</h3>
                    <p>ì—¬ê¸°ì— Google Maps API ë˜ëŠ” Kakao Map APIë¥¼ í†µí•´<br>ìµœì  ì´ë™ ê²½ë¡œì™€ ì¶”ì²œ ì¥ì†Œë“¤ì´ í‘œì‹œë©ë‹ˆë‹¤</p>
                </div>
            </div>

            <div class="right-panel">
                <div class="chat-header">
                    <span>ğŸ¤–</span> AI ì—¬í–‰ í”Œë˜ë„ˆ
                </div>
                
                <div class="chat-messages">
                    <div class="message ai">
                        <div class="avatar ai">ğŸ¤–</div>
                        <div>
                            <div class="message-content">
                                ì•ˆë…•í•˜ì„¸ìš”! AI ì—¬í–‰ í”Œë˜ë„ˆì…ë‹ˆë‹¤. ì…ë ¥í•˜ì‹  ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ ìµœì ì˜ ì—¬í–‰ ì½”ìŠ¤ë¥¼ ë¶„ì„í•˜ê³  ìˆì–´ìš”. ì ì‹œë§Œ ê¸°ë‹¤ë ¤ì£¼ì„¸ìš”! âœ¨
                            </div>
                            <div class="message-time">ì˜¤ì „ 10:23</div>
                        </div>
                    </div>

                    <div class="message user">
                        <div class="avatar user">ğŸ‘¤</div>
                        <div>
                            <div class="message-content">
                                ê²½ë³µê¶, Nì„œìš¸íƒ€ì›Œ, ëª…ë™ ê±°ë¦¬ë¥¼ ê°€ê³  ì‹¶ì–´ìš”. ê´‘ì¥ì‹œì¥ê³¼ ëª…ë™êµìë„ ê¼­ ê°€ë³´ê³  ì‹¶ìŠµë‹ˆë‹¤!
                            </div>
                            <div class="message-time">ì˜¤ì „ 10:24</div>
                        </div>
                    </div>

                    <div class="message ai">
                        <div class="avatar ai">ğŸ¤–</div>
                        <div>
                            <div class="message-content">
                                ì¢‹ì€ ì„ íƒì´ì‹œë„¤ìš”! ë¦¬ë·° ë°ì´í„°ë¥¼ ë¶„ì„í•œ ê²°ê³¼, ì—¬ëŸ¬ë¶„ì˜ ì—¬í–‰ ìŠ¤íƒ€ì¼ì— ì™„ë²½í•œ ì½”ìŠ¤ë¥¼ ì°¾ì•˜ìŠµë‹ˆë‹¤. ğŸ˜Š
                                <br><br>
                                KNN ì•Œê³ ë¦¬ì¦˜ìœ¼ë¡œ 2,345ê°œì˜ ë¦¬ë·°ë¥¼ ë¶„ì„í•œ ê²°ê³¼, ê²½ë³µê¶ ê·¼ì²˜ 'ì¸ì‚¬ë™ ì „í†µì°»ì§‘'(í‰ì  4.9)ì„ ì¶”ê°€ë¡œ ì¶”ì²œë“œë ¤ìš”!
                            </div>
                            <div class="message-time">ì˜¤ì „ 10:24</div>
                        </div>
                    </div>

                    <div class="message ai">
                        <div class="avatar ai">ğŸ¤–</div>
                        <div>
                            <div class="message-content">
                                <strong>ğŸ“… 1ì¼ì°¨ ì¶”ì²œ ì½”ìŠ¤</strong>
                                <div class="course-box">
                                    <strong>09:00 - ê²½ë³µê¶</strong>
                                    ëª…ì†Œ 1 Â· ë„ë³´ 8ë¶„ (600m)
                                </div>
                                <div class="course-box">
                                    <strong>11:30 - ê´‘ì¥ì‹œì¥</strong>
                                    ì ì‹¬ ì‹ì‚¬ Â· ì°¨ëŸ‰ 15ë¶„ (4.2km)<br>
                                    â­ 4.8ì  Â· ë¦¬ë·° 2,345ê°œ
                                </div>
                                <div class="course-box">
                                    <strong>13:00 - Nì„œìš¸íƒ€ì›Œ</strong>
                                    ëª…ì†Œ 2 Â· ë„ë³´ 12ë¶„ (900m)
                                </div>
                                <div class="course-box">
                                    <strong>16:00 - ì¸ì‚¬ë™ ì „í†µì°»ì§‘</strong>
                                    ì¶”ì²œ ì¹´í˜ Â· ê²½ë¡œìƒ ìœ„ì¹˜<br>
                                    â­ 4.9ì  Â· ë¦¬ë·° 2,103ê°œ
                                </div>
                            </div>
                            <div class="message-time">ì˜¤ì „ 10:25</div>
                        </div>
                    </div>

                    <div class="message ai">
                        <div class="avatar ai">ğŸ¤–</div>
                        <div>
                            <div class="message-content">
                                <strong>ğŸ“… 2ì¼ì°¨ ì¶”ì²œ ì½”ìŠ¤</strong>
                                <div class="course-box">
                                    <strong>10:00 - ëª…ë™ ê±°ë¦¬</strong>
                                    ëª…ì†Œ 3 Â· ë„ë³´ 5ë¶„ (400m)
                                </div>
                                <div class="course-box">
                                    <strong>12:30 - ëª…ë™êµì</strong>
                                    ì ì‹¬ ì‹ì‚¬ Â· ë„ë³´ 3ë¶„ (200m)<br>
                                    â­ 4.6ì  Â· ë¦¬ë·° 1,823ê°œ
                                </div>
                                <div class="course-box">
                                    <strong>14:00 - ì‚¼ì²­ë™ ìˆ˜ì œë¹„</strong>
                                    ê²½ë¡œìƒ ë§›ì§‘ Â· ê°„ì‹ ì¶”ì²œ<br>
                                    â­ 4.7ì  Â· ë¦¬ë·° 1,456ê°œ
                                </div>
                            </div>
                            <div class="message-time">ì˜¤ì „ 10:25</div>
                        </div>
                    </div>

                    <div class="message ai">
                        <div class="avatar ai">ğŸ¤–</div>
                        <div>
                            <div class="message-content">
                                <strong>ğŸ“Š ì—¬í–‰ ìš”ì•½ ì •ë³´</strong><br><br>
                                <strong>ì´ ì´ë™ ê±°ë¦¬:</strong> 8.3km<br>
                                <strong>ì˜ˆìƒ ì†Œìš” ì‹œê°„:</strong> 2ì¼<br>
                                <strong>ì¶”ì²œ êµí†µìˆ˜ë‹¨:</strong> ë„ë³´ + ëŒ€ì¤‘êµí†µ<br>
                                <strong>ì˜ˆìƒ ë¹„ìš©:</strong> ì•½ 80,000ì›/ì¸<br><br>
                                ì´ ì½”ìŠ¤ëŠ” ì´ë™ ê±°ë¦¬ë¥¼ ìµœì†Œí™”í•˜ë©´ì„œ í‰ì ì´ ë†’ì€ ë§›ì§‘ë“¤ì„ ê²½ë¡œì— í¬í•¨ì‹œì¼°ì–´ìš”. ì¦ê±°ìš´ ì—¬í–‰ ë˜ì„¸ìš”! ğŸ‰
                            </div>
                            <div class="message-time">ì˜¤ì „ 10:26</div>
                        </div>
                    </div>
                </div>

                <div class="chat-input-container">
                    <input 
                        type="text" 
                        class="chat-input" 
                        placeholder="ë©”ì‹œì§€ë¥¼ ì…ë ¥í•˜ì„¸ìš”... (ì˜ˆ: ì¼ì • ë³€ê²½, ì¶”ê°€ ì¶”ì²œ ìš”ì²­)"
                    >
                    <button class="send-button">ğŸ“¤</button>
                </div>
            </div>
        </div>
    </div>

    <!-- FAQ í˜ì´ì§€ -->
    <div class="faq-page" id="faqPage">
        <div class="faq-header">
            <div>
                <h1>â“ ìì£¼ ë¬»ëŠ” ì§ˆë¬¸ (FAQ)</h1>
                <p style="font-size: 0.9em; margin-top: 5px; opacity: 0.9;">ì„œìš¸ ê´€ê´‘ì— ëŒ€í•œ ê¶ê¸ˆí•œ ì ì„ AI ì±—ë´‡ì—ê²Œ ë¬¼ì–´ë³´ì„¸ìš”</p>
            </div>
            <button class="back-btn" onclick="showMain()">â† ë©”ì¸ìœ¼ë¡œ</button>
        </div>

        <div class="faq-content">
            <div class="faq-sidebar">
                <div class="faq-category">
                    <div class="category-title">ğŸšŒ ì„œìš¸ì‹œí‹°íˆ¬ì–´ë²„ìŠ¤</div>
                    <div class="faq-questions">
                        <div class="faq-question-item" onclick="askQuestion(this)">ì •ë¥˜ì¥ì—ì„œ í•˜ì°¨ í›„ ë‹¤ë¥¸ ì‹œí‹°íˆ¬ì–´ë²„ìŠ¤ë¥¼ ì´ìš©í•  ìˆ˜ ìˆë‚˜ìš”?</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">íƒ‘ìŠ¹ ì¥ì†Œ ë° ì¶œë°œì§€ëŠ” ì–´ë””ì¸ê°€ìš”?</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">í• ì¸ ì´ë²¤íŠ¸ë‚˜ í˜œíƒì´ ìˆë‚˜ìš”?</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">ëª¨ë“  ì½”ìŠ¤ì—ì„œ ê°€ì´ë“œê°€ ì œê³µë˜ë‚˜ìš”?</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">ì¢Œì„ì„ ì„ íƒí•  ìˆ˜ ìˆë‚˜ìš”?</div>
                    </div>
                </div>

                <div class="faq-category">
                    <div class="category-title">ğŸš¶ ë„ë³´ê´€ê´‘</div>
                    <div class="faq-questions">
                        <div class="faq-question-item" onclick="askQuestion(this)">ë„ë³´ê´€ê´‘ ì˜ˆì•½ ê°€ëŠ¥í•œ ìµœì†Œ, ìµœëŒ€ ì¸ì›ì€?</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">ë‚´êµ­ì¸ë„ ì™¸êµ­ì–´ í•´ì„¤ì„ ë“¤ì„ ìˆ˜ ìˆë‚˜ìš”?</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">ì˜ˆì•½ ì·¨ì†ŒëŠ” ì–´ë–»ê²Œ í•˜ë‚˜ìš”?</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">ë„ë³´ê´€ê´‘ í•´ì„¤ì‚¬ì—ê²Œ ë¹„ìš©ì„ ì§€ë¶ˆí•´ì•¼ í•˜ë‚˜ìš”?</div>
                    </div>
                </div>

                <div class="faq-category">
                    <div class="category-title">ğŸ­ ë¬¸í™”í–‰ì‚¬ ì˜ˆë§¤</div>
                    <div class="faq-questions">
                        <div class="faq-question-item" onclick="askQuestion(this)">ê³µì—° ì‹œê°„ë³´ë‹¤ ëŠ¦ê²Œ ë„ì°©í•´ë„ ì…ì¥í•  ìˆ˜ ìˆë‚˜ìš”?</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">í‹°ì¼“ì€ ì–´ë””ì„œ ë°›ë‚˜ìš”?</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">ì·¨ì†Œ ìˆ˜ìˆ˜ë£ŒëŠ” ì–¼ë§ˆì¸ê°€ìš”?</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">ì˜ˆì•½ì„ ì¼ë¶€ë§Œ ì·¨ì†Œí•  ìˆ˜ ìˆë‚˜ìš”?</div>
                    </div>
                </div>

                <div class="faq-category">
                    <div class="category-title">ğŸ“± ì„œë¹„ìŠ¤ ì´ìš©</div>
                    <div class="faq-questions">
                        <div class="faq-question-item" onclick="askQuestion(this)">ê°€ì´ë“œë¶, ì§€ë„ëŠ” ì–´ë””ì„œ ë‹¤ìš´ë¡œë“œ ë°›ë‚˜ìš”?</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">Visit Seoul ì•±ì€ ì–´ë””ì„œ ë‹¤ìš´ë¡œë“œ ë°›ë‚˜ìš”?</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">ì„œìš¸ì‹œë‚´ ê´€ê´‘ ì•ˆë‚´ì†Œ ìœ„ì¹˜ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">Visit Seoul ì›¹ì‚¬ì´íŠ¸ì—ì„œ ì–´ë–¤ ì •ë³´ë¥¼ ì–»ì„ ìˆ˜ ìˆë‚˜ìš”?</div>
                    </div>
                </div>

                <div class="faq-category">
                    <div class="category-title">â„¹ï¸ ê¸°íƒ€</div>
                    <div class="faq-questions">
                        <div class="faq-question-item" onclick="askQuestion(this)">Visit Seoul ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ê³  ì‹¶ì–´ìš”</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">ì „ì‹œë¥¼ visitseoul.netì— ë“±ë¡í•˜ê³  ì‹¶ì–´ìš”</div>
                        <div class="faq-question-item" onclick="askQuestion(this)">ì›¹ì‚¬ì´íŠ¸ì˜ ì‚¬ì§„ì„ ììœ ë¡­ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‚˜ìš”?</div>
                    </div>
                </div>
            </div>

            <div class="faq-main">
                <div class="faq-chatbot">
                    <div class="chat-header">
                        <span>ğŸ¤–</span> FAQ AI ì±—ë´‡
                    </div>
                    
                    <div class="faq-chat-messages">
                        <div class="message ai">
                            <div class="avatar ai">ğŸ¤–</div>
                            <div>
                                <div class="message-content">
                                    ì•ˆë…•í•˜ì„¸ìš”! ì„œìš¸ ê´€ê´‘ FAQ ì±—ë´‡ì…ë‹ˆë‹¤. ğŸ˜Š<br><br>
                                    ì™¼ìª½ ì¹´í…Œê³ ë¦¬ì—ì„œ ì§ˆë¬¸ì„ ì„ íƒí•˜ì‹œê±°ë‚˜, ì•„ë˜ ì…ë ¥ì°½ì— ê¶ê¸ˆí•œ ë‚´ìš©ì„ ì§ì ‘ ì…ë ¥í•´ì£¼ì„¸ìš”.<br><br>
                                    ì €ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì •ë³´ë¥¼ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤:<br>
                                    â€¢ ì„œìš¸ì‹œí‹°íˆ¬ì–´ë²„ìŠ¤ ì´ìš© ì•ˆë‚´<br>
                                    â€¢ ë„ë³´ê´€ê´‘ í”„ë¡œê·¸ë¨ ì •ë³´<br>
                                    â€¢ ë¬¸í™”í–‰ì‚¬ ì˜ˆë§¤ ê´€ë ¨ ë¬¸ì˜<br>
                                    â€¢ Visit Seoul ì„œë¹„ìŠ¤ ì´ìš© ë°©ë²•<br>
                                    â€¢ ê¸°íƒ€ ì„œìš¸ ê´€ê´‘ ê´€ë ¨ ì§ˆë¬¸
                                </div>
                                <div class="message-time">ì˜¤í›„ 2:30</div>
                            </div>
                        </div>

                        <div class="message user">
                            <div class="avatar user">ğŸ‘¤</div>
                            <div>
                                <div class="message-content">
                                    ì„œìš¸ì‹œí‹°íˆ¬ì–´ë²„ìŠ¤ëŠ” ì¢Œì„ì„ ì„ íƒí•  ìˆ˜ ìˆë‚˜ìš”?
                                </div>
                                <div class="message-time">ì˜¤í›„ 2:31</div>
                            </div>
                        </div>

                        <div class="message ai">
                            <div class="avatar ai">ğŸ¤–</div>
                            <div>
                                <div class="message-content">
                                    ì„œìš¸ì‹œí‹°íˆ¬ì–´ë²„ìŠ¤ëŠ” <strong>ì§€ì • ì¢Œì„ì œê°€ ì•„ë‹Œ ììœ ì„</strong>ìœ¼ë¡œ ìš´ì˜ë©ë‹ˆë‹¤.<br><br>
                                    ì¼ì‹œì ìœ¼ë¡œ ê´€ê´‘ê°ì´ ëª°ë¦´ ê²½ìš°ì—ëŠ” ì…ì„ìœ¼ë¡œ íƒ‘ìŠ¹í•˜ê±°ë‚˜ ë‹¤ìŒ íšŒì°¨ì˜ ë²„ìŠ¤ë¥¼ ì´ìš©í•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.<br><br>
                                    ğŸ’¡ <em>íŒ: ì„±ìˆ˜ê¸°ì—ëŠ” ì¼ì° ë„ì°©í•˜ì…”ì„œ ì¢‹ì€ ìë¦¬ë¥¼ ì„ ì í•˜ì‹œëŠ” ê²ƒì„ ì¶”ì²œë“œë¦½ë‹ˆë‹¤!</em>
                                </div>
                                <div class="message-time">ì˜¤í›„ 2:31</div>
                            </div>
                        </div>

                        <div class="message user">
                            <div class="avatar user">ğŸ‘¤</div>
                            <div>
                                <div class="message-content">
                                    ë„ë³´ê´€ê´‘ í•´ì„¤ì‚¬ì—ê²Œ ë¹„ìš©ì„ ì§€ë¶ˆí•´ì•¼ í•˜ë‚˜ìš”?
                                </div>
                                <div class="message-time">ì˜¤í›„ 2:32</div>
                            </div>
                        </div>

                        <div class="message ai">
                            <div class="avatar ai">ğŸ¤–</div>
                            <div>
                                <div class="message-content">
                                    ì•„ë‹™ë‹ˆë‹¤! ì„œìš¸ë¬¸í™”ê´€ê´‘í•´ì„¤ì‚¬ ë¶„ë“¤ì€ <strong>ìì›ë´‰ì‚¬ì</strong>ì´ë¯€ë¡œ ë”°ë¡œ í•´ì„¤ë¹„ë¥¼ ì§€ë¶ˆí•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ğŸ˜Š<br><br>
                                    ë‹¨, ê¶ê¶ ì…ì¥ë£Œ ë“±ì€ í˜„ì¥ì—ì„œ ê°ì ê°œë³„ì ìœ¼ë¡œ ì§€ë¶ˆí•˜ì…”ì•¼ í•©ë‹ˆë‹¤.<br><br>
                                    ğŸ“Œ <strong>ì°¸ê³ ì‚¬í•­:</strong><br>
                                    â€¢ í•´ì„¤ ì„œë¹„ìŠ¤: ë¬´ë£Œ<br>
                                    â€¢ ì…ì¥ë£Œ/êµí†µë¹„: ê°œì¸ ë¶€ë‹´
                                </div>
                                <div class="message-time">ì˜¤í›„ 2:32</div>
                            </div>
                        </div>

                        <div class="message user">
                            <div class="avatar user">ğŸ‘¤</div>
                            <div>
                                <div class="message-content">
                                    ì„œìš¸ì—ì„œ ê°€ì¥ ì¸ê¸° ìˆëŠ” ì•¼ê²½ ëª…ì†ŒëŠ” ì–´ë””ì¸ê°€ìš”?
                                </div>
                                <div class="message-time">ì˜¤í›„ 2:33</div>
                            </div>
                        </div>

                        <div class="message ai">
                            <div class="avatar ai">ğŸ¤–</div>
                            <div>
                                <div class="message-content">
                                    ì„œìš¸ì—ì„œ ê°€ì¥ ì¸ê¸° ìˆëŠ” ì•¼ê²½ ëª…ì†Œë“¤ì„ ì¶”ì²œí•´ë“œë¦´ê²Œìš”! ğŸŒƒ<br><br>
                                    <strong>ğŸŒŸ TOP 5 ì•¼ê²½ ëª…ì†Œ:</strong><br><br>
                                    1. <strong>Nì„œìš¸íƒ€ì›Œ</strong> - ì„œìš¸ ì „ê²½ì„ 360ë„ë¡œ ê°ìƒ<br>
                                    2. <strong>í•œê°• ë°˜í¬ëŒ€êµ ë‹¬ë¹›ë¬´ì§€ê°œë¶„ìˆ˜</strong> - í™”ë ¤í•œ ë¶„ìˆ˜ì‡¼<br>
                                    3. <strong>ë¶ì•…ìŠ¤ì¹´ì´ì›¨ì´ íŒ”ê°ì •</strong> - ì„œìš¸ ë„ì‹¬ ì „ë§<br>
                                    4. <strong>ì—¬ì˜ë„ í•œê°•ê³µì›</strong> - 63ë¹Œë”©ê³¼ ë‹¤ë¦¬ ì•¼ê²½<br>
                                    5. <strong>ë¡¯ë°ì›”ë“œíƒ€ì›Œ ì„œìš¸ìŠ¤ì¹´ì´</strong> - ì´ˆê³ ì¸µ ì „ë§ëŒ€<br><br>
                                    ğŸ’¡ <em>ì„œìš¸ì‹œí‹°íˆ¬ì–´ë²„ìŠ¤ ì•¼ê²½ì½”ìŠ¤ë¥¼ ì´ìš©í•˜ì‹œë©´ í¸í•˜ê²Œ ì—¬ëŸ¬ ëª…ì†Œë¥¼ ë‘˜ëŸ¬ë³´ì‹¤ ìˆ˜ ìˆì–´ìš”!</em>
                                </div>
                                <div class="message-time">ì˜¤í›„ 2:33</div>
                            </div>
                        </div>
                    </div>

                    <div class="chat-input-container">
                        <input 
                            type="text" 
                            class="chat-input" 
                            id="faqChatInput"
                            placeholder="ì„œìš¸ ê´€ê´‘ì— ëŒ€í•´ ê¶ê¸ˆí•œ ì ì„ ë¬¼ì–´ë³´ì„¸ìš”..."
                            onkeypress="if(event.key === 'Enter') sendFAQMessage()"
                        >
                        <button class="send-button" onclick="sendFAQMessage()">ğŸ“¤</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showFAQ() {
            document.getElementById('mainPage').style.display = 'none';
            document.getElementById('faqPage').classList.add('active');
        }

        function showMain() {
            document.getElementById('faqPage').classList.remove('active');
            document.getElementById('mainPage').style.display = 'flex';
        }

        function askQuestion(element) {
            const question = element.textContent;
            addUserMessage(question);
            // ì‹¤ì œ êµ¬í˜„ì‹œ ì—¬ê¸°ì„œ FAQ ë°ì´í„°ë¥¼ ê²€ìƒ‰í•˜ê±°ë‚˜ AI APIë¥¼ í˜¸ì¶œ
            setTimeout(() => {
                addAIResponse(question);
            }, 500);
        }

        function sendFAQMessage() {
            const input = document.getElementById('faqChatInput');
            const message = input.value.trim();
            
            if (message) {
                addUserMessage(message);
                input.value = '';
                
                // ì‹¤ì œ êµ¬í˜„ì‹œ AI API í˜¸ì¶œ
                setTimeout(() => {
                    addAIResponse(message);
                }, 800);
            }
        }

        function addUserMessage(text) {
            const chatMessages = document.querySelector('.faq-chat-messages');
            const time = new Date().toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message user';
            messageDiv.innerHTML = `
                <div class="avatar user">ğŸ‘¤</div>
                <div>
                    <div class="message-content">${text}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function addAIResponse(question) {
            const chatMessages = document.querySelector('.faq-chat-messages');
            const time = new Date().toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
            
            // ë”ë¯¸ ì‘ë‹µ ìƒì„± (ì‹¤ì œë¡œëŠ” AI APIì—ì„œ ë°›ì•„ì˜´)
            let response = generateDummyResponse(question);
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message ai';
            messageDiv.innerHTML = `
                <div class="avatar ai">ğŸ¤–</div>
                <div>
                    <div class="message-content">${response}</div>
                    <div class="message-time">${time}</div>
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function generateDummyResponse(question) {
            // FAQ ë°ì´í„° ê¸°ë°˜ ì‘ë‹µ ì‹œë®¬ë ˆì´ì…˜
            const faqResponses = {
                'ì¢Œì„': 'ì„œìš¸ì‹œí‹°íˆ¬ì–´ë²„ìŠ¤ëŠ” <strong>ì§€ì • ì¢Œì„ì œê°€ ì•„ë‹Œ ììœ ì„</strong>ìœ¼ë¡œ ìš´ì˜ë©ë‹ˆë‹¤.<br><br>ì¼ì‹œì ìœ¼ë¡œ ê´€ê´‘ê°ì´ ëª°ë¦´ ê²½ìš°ì—ëŠ” ì…ì„ìœ¼ë¡œ íƒ‘ìŠ¹í•˜ê±°ë‚˜ ë‹¤ìŒ íšŒì°¨ì˜ ë²„ìŠ¤ë¥¼ ì´ìš©í•´ì•¼ í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤.',
                'ë¹„ìš©': 'ì•„ë‹™ë‹ˆë‹¤! ì„œìš¸ë¬¸í™”ê´€ê´‘í•´ì„¤ì‚¬ ë¶„ë“¤ì€ <strong>ìì›ë´‰ì‚¬ì</strong>ì´ë¯€ë¡œ ë”°ë¡œ í•´ì„¤ë¹„ë¥¼ ì§€ë¶ˆí•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ğŸ˜Š<br><br>ë‹¨, ê¶ê¶ ì…ì¥ë£Œ ë“±ì€ í˜„ì¥ì—ì„œ ê°ì ê°œë³„ì ìœ¼ë¡œ ì§€ë¶ˆí•˜ì…”ì•¼ í•©ë‹ˆë‹¤.',
                'í• ì¸': 'ì„œìš¸ì‹œí‹°íˆ¬ì–´ë²„ìŠ¤ë¥¼ ìš´ì˜í•˜ëŠ” íƒ€ì´ê±°ë²„ìŠ¤ ë° ë…¸ë‘í’ì„ ì‹œí‹°ë²„ìŠ¤ì—ì„œ ë¹„ì •ê¸°ì ìœ¼ë¡œ íŠ¹ë³„í• ì¸ê°€ë¥¼ ì œê³µí•˜ê³  ìˆìŠµë‹ˆë‹¤. í™ˆí˜ì´ì§€ì—ì„œ í”„ë¡œëª¨ì…˜ ê°€ê²©ì„ í™•ì¸í•´ì£¼ì„¸ìš”.<br><br>â—‹ íƒ€ì´ê±°ë²„ìŠ¤ : https://www.seoulcitybus.com/main.do<br>â—‹ ë…¸ë‘í’ì„ ì‹œí‹°ë²„ìŠ¤ : https://www.seoulcitytourbus.co.kr/',
                'ì•¼ê²½': 'ì„œìš¸ì—ì„œ ê°€ì¥ ì¸ê¸° ìˆëŠ” ì•¼ê²½ ëª…ì†Œë“¤ì„ ì¶”ì²œí•´ë“œë¦´ê²Œìš”! ğŸŒƒ<br><br><strong>ğŸŒŸ TOP 5 ì•¼ê²½ ëª…ì†Œ:</strong><br><br>1. <strong>Nì„œìš¸íƒ€ì›Œ</strong> - ì„œìš¸ ì „ê²½ì„ 360ë„ë¡œ ê°ìƒ<br>2. <strong>í•œê°• ë°˜í¬ëŒ€êµ ë‹¬ë¹›ë¬´ì§€ê°œë¶„ìˆ˜</strong> - í™”ë ¤í•œ ë¶„ìˆ˜ì‡¼<br>3. <strong>ë¶ì•…ìŠ¤ì¹´ì´ì›¨ì´ íŒ”ê°ì •</strong> - ì„œìš¸ ë„ì‹¬ ì „ë§<br>4. <strong>ì—¬ì˜ë„ í•œê°•ê³µì›</strong> - 63ë¹Œë”©ê³¼ ë‹¤ë¦¬ ì•¼ê²½<br>5. <strong>ë¡¯ë°ì›”ë“œíƒ€ì›Œ ì„œìš¸ìŠ¤ì¹´ì´</strong> - ì´ˆê³ ì¸µ ì „ë§ëŒ€',
                'ë§›ì§‘': 'ì„œìš¸ì˜ ìœ ëª… ë§›ì§‘ ì§€ì—­ì„ ì¶”ì²œí•´ë“œë¦´ê²Œìš”! ğŸ½ï¸<br><br><strong>ì§€ì—­ë³„ ë§›ì§‘ ëª…ì†Œ:</strong><br><br>â€¢ <strong>ê´‘ì¥ì‹œì¥</strong> - ì „í†µ ë¶„ì‹ê³¼ í•œì‹<br>â€¢ <strong>ëª…ë™</strong> - ë‹¤ì–‘í•œ ìŒì‹ì ê³¼ ì¹´í˜<br>â€¢ <strong>ì´íƒœì›</strong> - ì„¸ê³„ ê°êµ­ì˜ ìš”ë¦¬<br>â€¢ <strong>ê°•ë‚¨</strong> - ê³ ê¸‰ ë ˆìŠ¤í† ë‘<br>â€¢ <strong>í™ëŒ€</strong> - ì Šì€ ê°ê°ì˜ ì¹´í˜ì™€ ìŒì‹ì <br><br>ğŸ’¡ ì €í¬ ë§ì¶¤í˜• ê´€ê´‘ ì½”ìŠ¤ ì¶”ì²œ ì‹œìŠ¤í…œì—ì„œ ì›í•˜ëŠ” ë§›ì§‘ì„ ì…ë ¥í•˜ì‹œë©´ ìµœì ì˜ ê²½ë¡œë¥¼ ì¶”ì²œí•´ë“œë ¤ìš”!'
            };
            
            // í‚¤ì›Œë“œ ë§¤ì¹­
            for (let keyword in faqResponses) {
                if (question.includes(keyword)) {
                    return faqResponses[keyword];
                }
            }
            
            // ê¸°ë³¸ ì‘ë‹µ
            return `"${question}"ì— ëŒ€í•´ ë‹µë³€ë“œë¦¬ê² ìŠµë‹ˆë‹¤.<br><br>ì£„ì†¡í•©ë‹ˆë‹¤ë§Œ, í•´ë‹¹ ì§ˆë¬¸ì— ëŒ€í•œ ì •í™•í•œ FAQ ì •ë³´ê°€ ì—†ìŠµë‹ˆë‹¤. ğŸ˜…<br><br>í•˜ì§€ë§Œ ì¼ë°˜ì ì¸ ì„œìš¸ ê´€ê´‘ ì •ë³´ëŠ” ë‹¤ìŒì„ ì°¸ê³ í•´ì£¼ì„¸ìš”:<br><br>â€¢ <strong>Visit Seoul ì›¹ì‚¬ì´íŠ¸:</strong> https://korean.visitseoul.net<br>â€¢ <strong>ê´€ê´‘ ë¬¸ì˜:</strong> 1330 (ê´€ê´‘í†µì—­ì•ˆë‚´ì „í™”)<br>â€¢ <strong>ì„œìš¸ì‹œí‹°íˆ¬ì–´ë²„ìŠ¤:</strong> https://korean.visitseoul.net/citytourbus<br><br>ë” ìì„¸í•œ ì •ë³´ëŠ” ë¹ ë¥¸ ì‹œì¼ë‚´ì— openAI APIë¥¼ í†µí•´ ì œê³µí•´ ë“œë¦¬ê² ìŠµë‹ˆë‹¤! ğŸ˜Š`;
        }
    // API ì£¼ì†Œ ìë™ ì„¤ì • + ì¿¼ë¦¬ ì˜¤ë²„ë¼ì´ë“œ(?api=http://IP:PORT)
  function getParam(name){ return new URL(location.href).searchParams.get(name); }
  const forced = getParam('api');
  const proto  = location.protocol;
  const host   = location.hostname;
  const API_BASE = forced || `${proto}//${host}:8000`;
  const CHAT_URL = API_BASE + "/chat";

  // ì˜¤ë¥¸ìª½ íŒ¨ë„ ì—˜ë¦¬ë¨¼íŠ¸ í•¸ë“¤
  const rightPanel = document.querySelector('.right-panel');
  const rpMessages = rightPanel.querySelector('.chat-messages');
  const rpInput    = rightPanel.querySelector('.chat-input');
  const rpSendBtn  = rightPanel.querySelector('.send-button');

  let rpHistory = [];
  let rpSending = false;

  // ì‹œê°„ ë¬¸ìì—´
  function nowTime(){
    return new Date().toLocaleTimeString('ko-KR', { hour: '2-digit', minute: '2-digit' });
  }

  // ì‚¬ìš©ì/AI ë§í’ì„  ì¶”ê°€(ì˜¤ë¥¸ìª½ íŒ¨ë„ ìŠ¤íƒ€ì¼ ìœ ì§€)
  function rpAddMessage(role, html){
    const wrap = document.createElement('div');
    wrap.className = `message ${role}`;
    wrap.innerHTML = role === 'user'
      ? `<div class="avatar user">ğŸ‘¤</div>
         <div>
           <div class="message-content">${html}</div>
           <div class="message-time">${nowTime()}</div>
         </div>`
      : `<div class="avatar ai">ğŸ¤–</div>
         <div>
           <div class="message-content">${html}</div>
           <div class="message-time">${nowTime()}</div>
         </div>`;
    rpMessages.appendChild(wrap);
    rpMessages.scrollTop = rpMessages.scrollHeight;
  }

  // ì¼ì •(itinerary_v1)ì„ ê¸°ì¡´ ì¹´ë“œ ìŠ¤íƒ€ì¼ë¡œ ë Œë”
  function rpRenderItinerary(it){
    const parts = [];

    // ìš”ì•½ì´ ìˆìœ¼ë©´ ì²« ì¹´ë“œë¡œ
    if (it.summary){
      parts.push(
        `<div class="itinerary-card">
           <div class="it-day"><span class="badge">ìš”ì•½</span>ì—¬í–‰ ìš”ì•½</div>
           <div class="it-sub">${escapeHTML(it.summary)}</div>
         </div>`
      );
    }

    (it.days || []).forEach((day, di) => {
      const dayTitle = day.date ? `${day.date}` : `Day ${di+1}`;
      const rows = (day.segments || []).map(seg => {
        const t1  = seg.time_start || '';
        const t2  = seg.time_end   || '';
        const time = (t1 || t2) ? `${t1}${t2?` ~ ${t2}`:''}` : '';
        const title = seg.title || '';
        const note  = seg.note  ? `<div class="it-sub">${escapeHTML(seg.note)}</div>` : '';

        const metaBits = [];
        if (seg.transport) metaBits.push(seg.transport);
        if (seg.distance)  metaBits.push(seg.distance);
        if (seg.review)    metaBits.push(`â­ ${seg.review}`);
        const meta = metaBits.length ? `<div class="it-meta">${escapeHTML(metaBits.join(' Â· '))}</div>` : '';

        return `
          <div class="it-row">
            <div class="it-time">${escapeHTML(time)}</div>
            <div class="it-body">
              <div class="it-title">${escapeHTML(title)}</div>
              ${note}
              ${meta}
            </div>
          </div>
        `;
      }).join('');

      parts.push(
        `<div class="itinerary-card">
           <div class="it-day"><span class="badge">${di+1}ì¼ì°¨</span>${escapeHTML(dayTitle)}</div>
           ${rows || `<div class="it-sub">ë“±ë¡ëœ ì„¸ê·¸ë¨¼íŠ¸ê°€ ì—†ìŠµë‹ˆë‹¤.</div>`}
         </div>`
      );
    });

    rpAddMessage('ai', parts.join(''));
  }
  
  function escapeHTML(s){
    return String(s).replace(/[&<>]/g, c => ({'&':'&amp;','<':'&lt;','>':'&gt;'}[c]));
  }

  // ì „ì†¡
  async function rpSend(){
    if(rpSending) return;
    const text = (rpInput.value || '').trim();
    if(!text) return;

    rpSending = true;
    rpInput.disabled = true;
    rpSendBtn.disabled = true;

    rpAddMessage('user', escapeHTML(text));
    rpInput.value = '';

    try{
      const res = await fetch(CHAT_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ message: text, history: rpHistory })
      });

      if(!res.ok){
        const errText = await res.text();
        rpAddMessage('ai', `ì„œë²„ ì˜¤ë¥˜(${res.status}).<br>URL: ${CHAT_URL}<br>ë©”ì‹œì§€: ${escapeHTML(errText.slice(0,300))}`);
        return;
      }

      const data = await res.json();

      // ëª¨ë¸ì´ itinerary_v1 JSON êµ¬ì¡°ë¥¼ ë³´ëƒˆëŠ”ì§€ ì²´í¬
      if (data && data.type === 'itinerary_v1') {
        rpRenderItinerary(data);
        rpHistory.push({ role:'assistant', content: JSON.stringify(data) });
      } else {
        const t = data.text || (typeof data === 'string' ? data : JSON.stringify(data));
        rpAddMessage('ai', escapeHTML(t));
        rpHistory.push({ role:'assistant', content: t });
      }
      rpHistory.push({ role:'user', content: text });

    } catch(err){
      rpAddMessage('ai', `ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜: ${escapeHTML(String(err))}<br>API: ${CHAT_URL}`);
      console.error(err);
    } finally{
      rpSending = false;
      rpInput.disabled = false;
      rpSendBtn.disabled = false;
      rpInput.focus();
    }
  }

  // ì´ë²¤íŠ¸ ë°”ì¸ë”©(ì˜¤ë¥¸ìª½ íŒ¨ë„ë§Œ)
  rpSendBtn.addEventListener('click', rpSend);
  rpInput.addEventListener('keydown', (e) => {
    if(e.key === 'Enter'){
      e.preventDefault();
      rpSend();
    }
  });
</script>
</body>
</html>